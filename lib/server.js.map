{"version":3,"sources":["server.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;IAGM,MAAM;YAAN,MAAM;;AACV,WADI,MAAM,GACI;0BADV,MAAM;;uEAAN,MAAM;;AAGR,UAAK,IAAI,GAAG,SAAS,CAAA;;GACtB;;eAJG,MAAM;;gCAME;AACV,UAAO,UAAU,8BAPf,MAAM,0CAO6B,CAAA;AACrC,UAAO,MAAM,GAAG,cAAI,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAA;AAC3D,aAAO,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;KAC9C;;;6BAEQ,UAAU,EAAE;AACnB,aAAO,UAAA,MAAM,EAAI;AACf,cAAM,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,KAAK,CAAC,CAAA;AACjC,cAAM,CAAC,EAAE,CAAC,OAAO,EAAE;iBAAM,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC;SAAA,CAAC,CAAA;AAC1D,cAAM,CAAC,EAAE,CAAC,MAAM,EAAG,UAAA,IAAI,EAAI;AACzB,cAAM,OAAO,GAAG,UAAU,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAA;AAC3C,cAAG,OAAO,OAAO,AAAC,KAAK,WAAW,IAAI,OAAO,KAAK,IAAI,EACpD,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAA;SACxB,CAAC,CAAA;OACH,CAAA;KACF;;;SAtBG,MAAM;;;kBAyBG,MAAM","file":"server.js","sourcesContent":["import net         from 'net'\nimport Middleware  from 'frp-middleware'\n\nclass Server extends Middleware {\n  constructor() {\n    super()\n    this.args = arguments\n  }\n\n  subscribe() {\n    const  middleware = super.subscribe()\n    const  server = net.createServer(this.callback(middleware))\n    return server.listen.apply(server, this.args)\n  }\n\n  callback(middleware) {\n    return socket => {\n      socket.on('error', console.error)\n      socket.on('close', () => console.log('Connection closed'))\n      socket.on('data',  data => {\n        const message = middleware(data.toString())\n        if(typeof(message) !== 'undefined' || message !== null)\n          socket.write(message)\n      })\n    }\n  }\n}\n\nexport default Server\n"],"sourceRoot":"/source/"}